<bs-row id="searchContent" class="row-center row">
  <semantic-search
  relations='{
"<https://florentinedrawings.itatti.harvard.edu/resource/field/Artist_Attribution>":[
  {
    "kind": "resource",
    "queryPattern": "
      {
        $subject crm:P108i_was_produced_by ?production.
        ?production crm:P01i_is_domain_of ?domain.
        ?domain a crm:PC14_carried_out_by.
        ?domain crm:P02_has_range ?__value__.
      }"
  }
],
"<https://florentinedrawings.itatti.harvard.edu/resource/field/Attribution_Qualifier>":[
{
"kind": "resource",
"queryPattern": "
  {
    $subject crm:P108i_was_produced_by ?production.
    ?production crm:P01i_is_domain_of ?domain.
    ?domain a crm:PC15_was_influenced_by .
    ?domain crm:P15.1_in_the_role_of ?__value__.
  }"
}
],
"<https://florentinedrawings.itatti.harvard.edu/resource/field/Recto_Technique>": [
{
"kind": "resource",
"queryPattern": "
  {
    $subject crm:P56_bears_feature ?feature.
    ?feature crm:P2_has_type <http://vocab.getty.edu/aat/300078817>.
    ?feature a crm:E25_Man-Made_Feature.
    ?feature crm:P81_was_modified_by ?modification.
    ?modification a crm:E11_Modification.
    ?modification crm:P32_used_general_technique ?__value__.
  }"
}],
"<https://florentinedrawings.itatti.harvard.edu/resource/field/Has_Location>": [
{
"kind": "resource",
"queryPattern": "
  {
    $subject crm:P30_custody_transferred_through ?transfer.
    ?transfer crm:P29_custody_recieved_by ?__value__.
  }"
}],
"<https://florentinedrawings.itatti.harvard.edu/resource/field/Has_Edition>": [
{
"kind": "resource",
"queryPattern": "
  {
    $subject <https://florentinedrawings.itatti.harvard.edu/resource/field/Has_Edition> ?__value__.
  }"
}]
}'
  search-profile='{
"categories":  
[
  {
    "iri":"<http://www.cidoc-crm.org/cidoc-crm/E21_Person>",
    "label":"Painter"
  },
  {
    "iri":"<http://www.cidoc-crm.org/cidoc-crm/E22_Man-Made_Object>",
    "label":"Artwork"
  },
  {
    "iri":"<http://www.cidoc-crm.org/cidoc-crm/E55_Type>",
    "label":"Techniques"
  }, 
  {
    "iri":"<http://www.cidoc-crm.org/cidoc-crm/E40_Legal_Body>",
    "label":"Location"
  }, 
  {
    "iri":"<http://www.cidoc-crm.org/cidoc-crm/E13_Attribute_Assignment>",
    "label":"Edition"
  }
],
"relations":
[
  {
    "iri": "<https://florentinedrawings.itatti.harvard.edu/resource/field/Artist_Attribution>",
    "label":"Artist",
    "hasDomain":"<http://www.cidoc-crm.org/cidoc-crm/E22_Man-Made_Object>",
    "hasRange":"<http://www.cidoc-crm.org/cidoc-crm/E21_Person>"
  },
  {
    "iri": "<https://florentinedrawings.itatti.harvard.edu/resource/field/Attribution_Qualifier>",
    "label":"Artist Attribution",
    "hasDomain":"<http://www.cidoc-crm.org/cidoc-crm/E22_Man-Made_Object>",
    "hasRange":"<http://www.cidoc-crm.org/cidoc-crm/E21_Person>"
  },
  {
    "iri":"<https://florentinedrawings.itatti.harvard.edu/resource/field/Recto_Technique>",
    "label":"Technique",
    "hasDomain":"<http://www.cidoc-crm.org/cidoc-crm/E22_Man-Made_Object>",
    "hasRange":"<http://www.cidoc-crm.org/cidoc-crm/E55_Type>"
  },
  {
    "iri":"<https://florentinedrawings.itatti.harvard.edu/resource/field/Has_Location>",
    "label":"Location",
    "hasDomain":"<http://www.cidoc-crm.org/cidoc-crm/E22_Man-Made_Object>",
    "hasRange":"<http://www.cidoc-crm.org/cidoc-crm/E40_Legal_Body>"
  },
  {
    "iri":"<https://florentinedrawings.itatti.harvard.edu/resource/field/Has_Edition>",
    "label":"Edition",
    "hasDomain":"<http://www.cidoc-crm.org/cidoc-crm/E22_Man-Made_Object>",
    "hasRange":"<http://www.cidoc-crm.org/cidoc-crm/E13_Attribute_Assignment>"
  },
  {
    "iri":"<https://florentinedrawings.itatti.harvard.edu/resource/field/Has_Edition>",
    "label":"Edition",
    "hasDomain":"<http://www.cidoc-crm.org/cidoc-crm/E22_Man-Made_Object>",
    "hasRange":"<http://www.cidoc-crm.org/cidoc-crm/E13_Attribute_Assignment>"
  }
]
}'
>

  <div id="search">
    <div id="header-search" class="home-page">  
    <semantic-form new-subject-template='http://www.example.com/switch/actions/{{UUID}}' post-action='redirect'
        browser-persistence=true form-id='example-8' fields='[
      {
        "id": "switch-action-type",
        "label": "Switch",
        "description": "Allows to select different forms",
        "xsdDatatype": "xsd:anyURI",
        "selectPattern": "SELECT $value WHERE { $subject <http://www.example.com/switch/has-action> $value }",
        "insertPattern": "INSERT { $subject <http://www.example.com/switch/has-action> $value } WHERE {}",
        "deletePattern": "DELETE { $subject <http://www.example.com/switch/has-action> $value } WHERE {}"
      }
    ]'>
        <semantic-form-switch for="switch-action-type" switch-on-field="switch-case-type">
          <semantic-form-switch-case label="All fields">
            <semantic-form-composite-input for="switch-action-type"
              new-subject-template='http://www.example.com/switch/action/allfields' fields='[
            {
              "id": "switch-case-type",
              "xsdDatatype": "xsd:anyURI",
              "minOccurs": "1",
              "maxOccurs": "1",
              "selectPattern": "SELECT ?value WHERE { $subject <http://www.example.com/switch/has-action-type> ?value }",
              "insertPattern": "INSERT { $subject <http://www.example.com/switch/has-action-type> ?value } WHERE {}",
              "deletePattern": "DELETE { $subject <http://www.example.com/switch/has-action-type> ?value } WHERE {}"
            }
          ]'>

              <semantic-form-hidden-input for="switch-case-type"
                default-value="http://www.example.com/switch/type/send">
              </semantic-form-hidden-input>

                <semantic-search-query-keyword domain='<http://www.w3.org/2000/01/rdf-schema#Resource>'
                  placeholder="Search for any field e.g. Michelangelo" escape-lucene-syntax='false' query='
                  PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                  PREFIX skos: <http://www.w3.org/2004/02/skos/core#>
                  SELECT ?subject WHERE {

                  {
                  ?artwork a crm:E22_Man-Made_Object.
                  ?artwork crm:P108i_was_produced_by ?production.
                  ?production crm:P01i_is_domain_of ?domain.
                  ?domain crm:P02_has_range ?subject.
                  ?subject rdfs:label ?someLabel. 
                  ?someLabel bds:search ?__token__ .
                  ?someLabel bds:minRelevance "0.3"^^xsd:double;
                  bds:matchAllTerms "true"  .
                  BIND( xsd:integer(substr(str(?value), 33)) as ?q)
                  }
                  UNION
                  {
                ?subject a crm:E22_Man-Made_Object.
                  ?subject  <http://www.cidoc-crm.org/cidoc-crm/P48_has_preferred_identifier> ?id .
                  ?id rdfs:label ?someLabel. 
                  ?someLabel bds:search ?__token__ .
                  ?someLabel bds:minRelevance "0.3"^^xsd:double;
                  bds:matchAllTerms "true"  .
                  BIND( xsd:integer(substr(str(?value), 33)) as ?q)
                  }
                  UNION
                  {
                    ?subject a crm:E22_Man-Made_Object.
                  ?subject crm:P56_bears_feature ?feature.
                  ?feature crm:P2_has_type ?featureType.
                  ?feature a crm:E25_Man-Made_Feature.
                  ?feature crm:P138_has_representation ?visual_item.
                  ?visual_item a crm:E36_Visual_Item.
                  ?visual_item crm:P102_has_title ?value_uri.
                  ?value_uri a crm:E35_Title.
                  ?value_uri rdfs:label ?someLabel.
                  ?value_uri crm:P141i_was_assigned_by ?editionAttributeAssignment.
                  ?someLabel bds:search ?__token__ .
                  ?someLabel bds:minRelevance "0.3"^^xsd:double;
                  bds:matchAllTerms "true"  .
                  BIND( xsd:integer(substr(str(?value), 33)) as ?q)
                  }
                  
                  
                  } ORDER BY ?q
                '></semantic-search-query-keyword>
            </semantic-form-composite-input>
          </semantic-form-switch-case>
          <semantic-form-switch-case label="Artist">
            <semantic-form-composite-input for="switch-action-type"
              new-subject-template='http://www.example.com/switch/action/artist' fields='[
            {
              "id": "switch-case-type",
              "xsdDatatype": "xsd:anyURI",
              "minOccurs": "1",
              "maxOccurs": "1",
              "selectPattern": "SELECT ?value WHERE { $subject <http://www.example.com/switch/has-action-type> ?value }",
              "insertPattern": "INSERT { $subject <http://www.example.com/switch/has-action-type> ?value } WHERE {}",
              "deletePattern": "DELETE { $subject <http://www.example.com/switch/has-action-type> ?value } WHERE {}"
            }
          ]'>
              <semantic-form-hidden-input for="switch-case-type"
                default-value="http://www.example.com/switch/type/move">
              </semantic-form-hidden-input>

                <semantic-search-query-keyword domain='<http://www.w3.org/2000/01/rdf-schema#Resource>'
                  placeholder="Search for an artist e.g. Michelangelo" escape-lucene-syntax='false' query='
                  PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                  PREFIX skos: <http://www.w3.org/2004/02/skos/core#>
                SELECT ?subject WHERE {
                  ?subject a crm:E22_Man-Made_Object.
                  ?subject crm:P108i_was_produced_by ?production.
                  ?production crm:P01i_is_domain_of ?domain.
                  ?domain crm:P02_has_range ?artist.
                  ?artist rdfs:label ?someLabel. 
                  ?someLabel bds:search ?__token__ .
                  ?someLabel bds:minRelevance "0.3"^^xsd:double;
                  bds:matchAllTerms "true"  .
                  BIND( xsd:integer(substr(str(?value), 33)) as ?q)
                  } ORDER BY ?q
                '></semantic-search-query-keyword>

            </semantic-form-composite-input>
          </semantic-form-switch-case>
          <semantic-form-switch-case label="Title">
            <semantic-form-composite-input for="switch-action-type"
              new-subject-template="http://www.example.com/switch/action/title" fields='[
            {
              "id": "switch-case-type",
              "xsdDatatype": "xsd:anyURI",
              "minOccurs": "1",
              "maxOccurs": "1",
              "selectPattern": "SELECT ?value WHERE { $subject <http://www.example.com/switch/has-action-type> ?value }",
              "insertPattern": "INSERT { $subject <http://www.example.com/switch/has-action-type> ?value } WHERE {}",
              "deletePattern": "DELETE { $subject <http://www.example.com/switch/has-action-type> ?value } WHERE {}"
            }
          ]'>
              <semantic-form-hidden-input for="switch-case-type"
                default-value="http://www.example.com/switch/type/receive">
              </semantic-form-hidden-input>

                <semantic-search-query-keyword domain='<http://www.w3.org/2000/01/rdf-schema#Resource>'
                  placeholder="Search for a title e.g. Madonna con.." escape-lucene-syntax='false' query='
                  PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                  PREFIX skos: <http://www.w3.org/2004/02/skos/core#>
                  SELECT ?subject WHERE {
                  ?subject a crm:E22_Man-Made_Object.
                  ?subject crm:P56_bears_feature ?feature.
                  ?feature crm:P2_has_type ?featureType.
                  ?feature a crm:E25_Man-Made_Feature.
                  ?feature crm:P138_has_representation ?visual_item.
                  ?visual_item a crm:E36_Visual_Item.
                  ?visual_item crm:P102_has_title ?value_uri.
                  ?value_uri a crm:E35_Title.
                  ?value_uri rdfs:label ?someLabel.
                  ?value_uri crm:P141i_was_assigned_by ?editionAttributeAssignment.
                  ?someLabel bds:search ?__token__ .
                  ?someLabel bds:minRelevance "0.3"^^xsd:double;
                  bds:matchAllTerms "true"  .
                  BIND( xsd:integer(substr(str(?value), 33)) as ?q)
                  } ORDER BY ?q
                '></semantic-search-query-keyword>

            </semantic-form-composite-input>
          </semantic-form-switch-case>
          <semantic-form-switch-case label="Inventory Number">
            <semantic-form-composite-input for="switch-action-type"
              new-subject-template="http://www.example.com/switch/action/inv.number" fields='[
            {
              "id": "switch-case-type",
              "xsdDatatype": "xsd:anyURI",
              "minOccurs": "1",
              "maxOccurs": "1",
              "selectPattern": "SELECT ?value WHERE { $subject <http://www.example.com/switch/has-action-type> ?value }",
              "insertPattern": "INSERT { $subject <http://www.example.com/switch/has-action-type> ?value } WHERE {}",
              "deletePattern": "DELETE { $subject <http://www.example.com/switch/has-action-type> ?value } WHERE {}"
            }
          ]'>
              <semantic-form-hidden-input for="switch-case-type"
                default-value="http://www.example.com/switch/type/allfields">
              </semantic-form-hidden-input>

                <semantic-search-query-keyword domain='<http://www.w3.org/2000/01/rdf-schema#Resource>'
                  placeholder="Search for an inventory number e.g. 1856,0621.1" escape-lucene-syntax='false' query='
                  PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                  PREFIX skos: <http://www.w3.org/2004/02/skos/core#>
                  SELECT ?subject ?someLabel WHERE {
                  ?subject a crm:E22_Man-Made_Object.
                  ?subject  <http://www.cidoc-crm.org/cidoc-crm/P48_has_preferred_identifier> ?id .
                  ?id rdfs:label ?someLabel. 
                  ?someLabel bds:search ?__token__ .
                  ?someLabel bds:minRelevance "0.3"^^xsd:double;
                  bds:matchAllTerms "true"  .
                  BIND( xsd:integer(substr(str(?value), 33)) as ?q)
                  } ORDER BY ?q
                '></semantic-search-query-keyword>

            </semantic-form-composite-input>
          </semantic-form-switch-case>
        </semantic-form-switch>
    </semantic-form>
    </div>
    
  <semantic-search-query-constant
domain="<http://www.cidoc-crm.org/cidoc-crm/E22_Man-Made_Object>"
query=" SELECT DISTINCT ?subject 
WHERE {
?subject a crm:E22_Man-Made_Object
}"
>
  </semantic-search-query-constant>
 
  <div  id="header-search-results" class="row">
    <bs-col lg="3" md="4" sm="5" class="fade-in" style="margin-top: 8px">
      <semantic-search-facet open-by-default="true"></semantic-search-facet>
    </bs-col>
    <bs-col lg="9" md="8" sm="7" >
      <semantic-search-result-holder>
        <bs-tabs
          unmount-on-exit="true"
          id="search-results"
          animation="false"
        >
          <bs-tab event-key="2" title="Grid">
            <semantic-search-result>
              <semantic-table
              id="grid-result"
              options='{
                "showFilter":false
              }'
              number-of-displayed-rows="10"
              query="
            SELECT DISTINCT ?subject  ?recto_title_1938 ?recto_title_1961
             WHERE {
              ?subject a crm:E22_Man-Made_Object.
             }
          "
              tuple-template="{{>tupleTemplate}}"
            >
              <template id="tupleTemplate">
                <div
                  class="rs-grid-element panel panel-default artwork-card fade-in"
                >
                  <semantic-link-container uri="{{subject.value}}">
                    <div class="panel-body">
                      <bs-col lg="4" md="12" xs="12">
                        <div class="row-center">
                          <semantic-query
                            query='SELECT DISTINCT ?imgUrl WHERE{
                        BIND(CONCAT("https://s3-eu-west-1.amazonaws.com/florentinedrawings/thumbs/",REPLACE(STR(REPLACE(STR({{subject}}),"/full/full/0/default.jpg","")), "(^.*)\\/(.*)$", "$2"),".jpg") AS ?imgUrl)
                      }'
                            template="{{> imageThumbnail}}"
                          >
                            <template id="imageThumbnail">
                              <object
                                data="{{bindings.0.imgUrl.value}}"
                                type="image/jpeg"
                                class="thumbnailImage"
                              ></object>
                            </template>
                          </semantic-query>
                        </div>
                      </bs-col>
                      <bs-col lg="7" md="10" xs="10">
                        <div
                          data-flex-layout="row md-column center-stretch"
                        >
                          <bs-row>
                            <mp-field-visualization
                              subject="{{subject.value}}"
                              fields='[[fieldDefinitions  
                        Title="https://florentinedrawings.itatti.harvard.edu/resource/field/Recto_Title_1961"
                        English_Title="https://florentinedrawings.itatti.harvard.edu/resource/field/Recto_Title_1938"  
                        Inv.Number="https://florentinedrawings.itatti.harvard.edu/resource/field/Inventory_Number"
                        Artist ="https://florentinedrawings.itatti.harvard.edu/resource/field/Artist_Attribution"
                        Technique="https://florentinedrawings.itatti.harvard.edu/resource/field/Technique"
                        Location="https://florentinedrawings.itatti.harvard.edu/resource/field/Location"
                        ]]'
                              template="{{>generalInfo}}"
                            >
                              <template id="generalInfo">
                                [[> rsp:ResourceFieldBasedVisualization
                                subject=[[this]] ]]
                              </template>
                            </mp-field-visualization>
                          </bs-row>
                        </div>
                      </bs-col>
                    </div>
                  </semantic-link-container>
                </div>
              </template>
            </semantic-table>
            </semantic-search-result>
          </bs-tab>
        </bs-tabs>
        
      </semantic-search-result-holder>
    </bs-col>
  </div>
</div>
</semantic-search>
</bs-row>